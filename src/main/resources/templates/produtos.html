<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
  <link rel="stylesheet" th:href="@{/css/style.css}">
</head>

<body>

  <h1 th:text="#{titulo.sistema}"></h1>

  <div th:if="${mensagemSucesso}" class="success-box">
    <p th:text="${mensagemSucesso}"></p>
  </div>

  <h2 th:text="${produto.id == null} ? #{titulo.formulario.novo} : #{titulo.formulario.editar}"></h2>

  <form th:action="@{/produtos/salvar}" th:object="${produto}" method="post" class="card">

    <input type="hidden" th:field="*{id}" />

    <label for="nome" th:text="#{produto.nome}"></label>
    <input type="text" id="nome" th:field="*{nome}" required />

    <br /><br />

    <label for="descricao" th:text="#{produto.descricao}"></label>
    <input type="text" id="descricao" th:field="*{descricao}" required />

    <br /><br />

    <label for="categoria" th:text="#{produto.categoria}"></label>
    <input type="text" id="categoria" th:field="*{categoria}" />

    <br /><br />

    <label for="precoCusto" th:text="#{produto.preco.custo}"></label>
    <input type="number" step="0.01" id="precoCusto" th:field="*{precoCusto}" />

    <br /><br />

    <label for="precoVenda" th:text="#{produto.preco.venda}"></label>
    <input type="number" step="0.01" id="precoVenda" th:field="*{precoVenda}" />

    <br /><br />

    <label for="quantidade" th:text="#{produto.quantidade}"></label>
    <input type="number" id="quantidade" th:field="*{quantidade}" />

    <br /><br />

    <label for="ativo" th:text="#{produto.ativo}"></label>
    <input type="checkbox" id="ativo" th:field="*{ativo}" />

    <br /><br />

    <button type="submit" th:text="${produto.id == null} ? #{botao.adicionar} : #{botao.atualizar}">
    </button>
  </form>

  <hr />

  <h2 th:text="#{titulo.lista.produtos}"></h2>

  <table th:if="${not #lists.isEmpty(produtos)}">
    <thead>
      <tr>
        <th th:text="#{produto.id}"></th>
        <th th:text="#{produto.nome}"></th>
        <th th:text="#{produto.descricao}"></th>
        <th th:text="#{produto.categoria}"></th>
        <th th:text="#{produto.precoCusto}"></th>
        <th th:text="#{produto.precoVenda}"></th>
        <th th:text="#{produto.quantidade}"></th>
        <th th:text="#{produto.ativo}"></th>
        <th th:text="#{produto.acao}"></th>
      </tr>
    </thead>

    <tbody>
      <tr th:each="p : ${produtos}">
        <td th:text="${p.id}"></td>
        <td th:text="${p.nome}"></td>
        <td th:text="${p.descricao}"></td>
        <td th:text="${p.categoria}"></td>
        <td th:text="${p.precoCusto}"></td>
        <td th:text="${p.precoVenda}"></td>
        <td th:text="${p.quantidade}"></td>
        <td><span th:text="${p.ativo} ? 'Sim' : 'NÃ£o'"></span></td>
        <td>
          <a th:href="@{/produtos/editar/{id}(id=${p.id})}" th:text="#{botao.editar}"></a>

          <form th:action="@{/produtos/deletar/{id}(id=${p.id})}" method="get" style="display:inline;">
            <button type="submit" th:text="#{botao.excluir}"></button>
          </form>
        </td>
      </tr>
    </tbody>
  </table>

  <p th:if="${#lists.isEmpty(produtos)}" th:text="#{mensagem.sem.produtos}"></p>

</body>

</html>
